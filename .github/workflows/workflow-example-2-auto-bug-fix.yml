# ì›Œí¬í”Œë¡œìš° ì˜ˆì œ 2: ë²„ê·¸ ìë™ ìˆ˜ì •
#
# ì´ íŒŒì¼ì„ .github/workflows/ ë””ë ‰í† ë¦¬ë¡œ ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”:
# cp workflow-example-2-auto-bug-fix.yml .github/workflows/auto-bug-fix.yml
#
# ëª©ì : 'bug' ë¼ë²¨ì´ ë¶™ì€ ì´ìŠˆì— ëŒ€í•´ ìë™ ìˆ˜ì • ì‹œë„
# íš¨ê³¼:
# - âš¡ ì¦‰ê°ì ì¸ ë²„ê·¸ ëŒ€ì‘
# - ğŸ¤– ë°˜ë³µì ì¸ ë²„ê·¸ëŠ” ìë™ í•´ê²°
# - â° ê°œë°œì ì‹œê°„ ì ˆì•½

name: Auto Bug Fix

on:
  issues:
    types: [labeled, opened]

permissions:
  contents: write
  issues: write
  pull-requests: write

jobs:
  auto-fix:
    # 'bug' ë¼ë²¨ì´ ìˆê±°ë‚˜, ì œëª©ì— [BUG]ê°€ í¬í•¨ëœ ê²½ìš°ì—ë§Œ ì‹¤í–‰
    if: |
      (github.event.label.name == 'bug') ||
      (github.event.action == 'opened' && contains(github.event.issue.title, '[BUG]'))
    runs-on: ubuntu-latest
    steps:
      - name: Add processing label
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue edit ${{ github.event.issue.number }} \
            --add-label "ai-processing" \
            --repo ${{ github.repository }}

      - name: Request Auto Fix
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh issue comment ${{ github.event.issue.number }} \
            --body "@claude ì´ ë²„ê·¸ë¥¼ ë¶„ì„í•˜ê³  ìˆ˜ì •í•´ì£¼ì„¸ìš”.

          ë‹¤ìŒ ë‹¨ê³„ë¥¼ ìˆ˜í–‰í•´ì£¼ì„¸ìš”:
          1. ğŸ” ë²„ê·¸ ì›ì¸ ë¶„ì„ ë° ê´€ë ¨ íŒŒì¼ ì°¾ê¸°
          2. ğŸ› ï¸ ìˆ˜ì • ì½”ë“œ ì‘ì„±
          3. âœ… ê´€ë ¨ í…ŒìŠ¤íŠ¸ ì¶”ê°€ ë˜ëŠ” ì—…ë°ì´íŠ¸
          4. ğŸ“ ìˆ˜ì • ë‚´ìš©ì„ ëª…í™•íˆ ì„¤ëª…í•˜ëŠ” PR ìƒì„±

          ë§Œì•½ ë²„ê·¸ê°€ ë³µì¡í•˜ê±°ë‚˜ ì¶”ê°€ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°, êµ¬ì²´ì ìœ¼ë¡œ ì§ˆë¬¸í•´ì£¼ì„¸ìš”." \
            --repo ${{ github.repository }}

# ì°¸ê³ : AIê°€ PRì„ ìƒì„±í•˜ë©´, ê¸°ì¡´ì˜ claude.yml ì›Œí¬í”Œë¡œìš°ê°€ ìë™ìœ¼ë¡œ ì²˜ë¦¬í•©ë‹ˆë‹¤.
